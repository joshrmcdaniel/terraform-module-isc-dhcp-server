Most of the configuration is done in [locals](./locals.tf)

Example plan:

```
Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # module.dhcp.null_resource.forward_zone_db["Etc"] will be created
  + resource "null_resource" "forward_zone_db" {
      + id       = (known after apply)
      + triggers = {
          + "domain_name" = "sn3.lan"
        }
    }

  # module.dhcp.null_resource.forward_zone_db["Main"] will be created
  + resource "null_resource" "forward_zone_db" {
      + id       = (known after apply)
      + triggers = {
          + "domain_name" = "lan"
        }
    }

  # module.dhcp.null_resource.forward_zone_db["Secondary"] will be created
  + resource "null_resource" "forward_zone_db" {
      + id       = (known after apply)
      + triggers = {
          + "domain_name" = "sn2.lan"
        }
    }

  # module.dhcp.null_resource.recreate_ddns_conf[0] will be created
  + resource "null_resource" "recreate_ddns_conf" {
      + id       = (known after apply)
      + triggers = {
          + "cfg" = <<-EOT
                # BIND DDNS Configuration
                #
                # --- Generated by Terraform ---
                #
                # ==============================================================================
                #
                include "/etc/bind/ddns-keys.conf";
                #
                # Forward Zones
                # ------------------------------------------------------------------------------
                #
                # --- Etc ---
                #
                zone "sn3.lan" {
                    type master;
                    file "/etc/bind/db.sn3.lan";
                    allow-update { key dhcpupdate; };
                };
                # --- Main ---
                #
                zone "lan" {
                    type master;
                    file "/etc/bind/db.lan";
                    allow-update { key dhcpupdate; };
                };
                # --- Secondary ---
                #
                zone "sn2.lan" {
                    type master;
                    file "/etc/bind/db.sn2.lan";
                    allow-update { key dhcpupdate; };
                };
                #
                # Reverse Zones
                # ------------------------------------------------------------------------------
                #
                # --- Etc ---
                #
                zone "3.168.192.in-addr.arpa" {
                    type master;
                    file "/etc/bind/db.3.168.192.in-addr.arpa";
                    allow-update { key dhcpupdate; };
                };
                #
                # --- Main ---
                #
                zone "1.168.192.in-addr.arpa" {
                    type master;
                    file "/etc/bind/db.1.168.192.in-addr.arpa";
                    allow-update { key dhcpupdate; };
                };
                #
                # --- Secondary ---
                #
                zone "2.168.192.in-addr.arpa" {
                    type master;
                    file "/etc/bind/db.2.168.192.in-addr.arpa";
                    allow-update { key dhcpupdate; };
                };
            EOT
        }
    }

  # module.dhcp.null_resource.recreate_dhcpd_conf will be created
  + resource "null_resource" "recreate_dhcpd_conf" {
      + id       = (known after apply)
      + triggers = {
          + "cfg" = <<-EOT
                # ISC DHCP Server Configuration
                #
                # --- Generated by Terraform ---
                #
                # ==============================================================================
                #
                # Global Settings
                # ------------------------------------------------------------------------------
                #
                authoritative;
                ddns-updates on;
                ddns-domainname "lan";
                ddns-rev-domainname "in-addr.arpa";
                ddns-update-style interim;
                include "/etc/bind/ddns-keys.conf";
                ignore client-updates;
                #
                default-lease-time 600;
                max-lease-time 7200;
                #
                # Subnet Pools
                # ------------------------------------------------------------------------------
                #
                # --- Pool for Etc ---
                #
                subnet 192.168.3.0 netmask 255.255.255.0 {
                  range 192.168.3.10 192.168.3.254;
                  option routers 192.168.3.1;
                  option subnet-mask 255.255.255.0;
                  option broadcast-address 192.168.3.255;
                  option domain-name-servers 192.168.3.1;
                  option domain-name "sn3.lan";
                  option domain-search "sn2.lan", "sn3.lan";
                }#
                zone sn3.lan. {
                    primary 127.0.0.1;
                    key dhcpupdate;
                }
                #
                zone 3.168.192.in-addr.arpa. {
                  primary 127.0.0.1;
                  key dhcpupdate;
                }
                #
                #
                # --- Pool for Main ---
                #
                subnet 192.168.1.0 netmask 255.255.255.0 {
                  range 192.168.1.10 192.168.1.200;
                  option routers 192.168.1.1;
                  option subnet-mask 255.255.255.0;
                  option broadcast-address 192.168.1.255;
                  option domain-name-servers 192.168.1.1;
                  option domain-name "lan";
                  option domain-search "lan", "sn2.lan", "sn3.lan";
                }#
                zone lan. {
                    primary 127.0.0.1;
                    key dhcpupdate;
                }
                #
                zone 1.168.192.in-addr.arpa. {
                  primary 127.0.0.1;
                  key dhcpupdate;
                }
                #
                #
                # --- Pool for Secondary ---
                #
                subnet 192.168.2.0 netmask 255.255.255.0 {
                  range 192.168.2.100 192.168.2.254;
                  option routers 192.168.2.1;
                  option subnet-mask 255.255.255.0;
                  option broadcast-address 192.168.2.255;
                  option domain-name-servers 192.168.2.1;
                  option domain-name "sn2.lan";
                  option domain-search "sn2.lan", "sn3.lan";
                }#
                zone sn2.lan. {
                    primary 127.0.0.1;
                    key dhcpupdate;
                }
                #
                zone 2.168.192.in-addr.arpa. {
                  primary 127.0.0.1;
                  key dhcpupdate;
                }
                #
            EOT
        }
    }

  # module.dhcp.null_resource.reverse_zone_db["1.168.192"] will be created
  + resource "null_resource" "reverse_zone_db" {
      + id       = (known after apply)
      + triggers = {
          + "zone" = "1.168.192"
        }
    }

  # module.dhcp.null_resource.reverse_zone_db["2.168.192"] will be created
  + resource "null_resource" "reverse_zone_db" {
      + id       = (known after apply)
      + triggers = {
          + "zone" = "2.168.192"
        }
    }

  # module.dhcp.null_resource.reverse_zone_db["3.168.192"] will be created
  + resource "null_resource" "reverse_zone_db" {
      + id       = (known after apply)
      + triggers = {
          + "zone" = "3.168.192"
        }
    }

Plan: 8 to add, 0 to change, 0 to destroy.
```